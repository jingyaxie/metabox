# MetaBox é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ ç›®å½•ç»“æ„æ€»è§ˆ

```
MetaBox/
â”œâ”€â”€ ğŸ“„ .cursorrules              # å¼€å‘è§„èŒƒé…ç½®
â”œâ”€â”€ ğŸ“„ README.md                 # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ CHANGELOG.md              # ç‰ˆæœ¬æ›´æ–°æ—¥å¿—
â”œâ”€â”€ ğŸ“„ env.example               # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ ğŸ“„ PROJECT_STRUCTURE.md      # é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ ğŸ“„ local_kb_system_spec_full.md  # ç³»ç»ŸæŠ€æœ¯è§„æ ¼æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ¨ frontend/                 # React å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ ğŸ“„ package.json          # å‰ç«¯ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ ğŸ“ src/                  # æºä»£ç ç›®å½•
â”‚   â”‚   â”œâ”€â”€ ğŸ“ components/       # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ pages/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ hooks/           # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ ğŸ“ stores/          # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/        # API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ ğŸ“ utils/           # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ ğŸ“ types/           # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ ğŸ“ tests/               # å‰ç«¯æµ‹è¯•
â”‚   â””â”€â”€ ğŸ“ public/              # é™æ€èµ„æº
â”‚
â”œâ”€â”€ âš™ï¸ backend/                  # FastAPI åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ ğŸ“„ requirements.txt      # Python ä¾èµ–
â”‚   â”œâ”€â”€ ğŸ“ app/                 # åº”ç”¨ä»£ç ç›®å½•
â”‚   â”‚   â”œâ”€â”€ ğŸ“ api/             # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ ğŸ“ core/            # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ ğŸ“ models/          # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/        # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â””â”€â”€ ğŸ“ utils/           # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ ğŸ“ tests/               # åç«¯æµ‹è¯•
â”‚   â””â”€â”€ ğŸ“ alembic/             # æ•°æ®åº“è¿ç§»
â”‚
â”œâ”€â”€ ğŸ³ docker/                   # Docker é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ docker-compose.yml   # å®¹å™¨ç¼–æ’é…ç½®
â”‚   â”œâ”€â”€ ğŸ“ frontend/            # å‰ç«¯ Docker é…ç½®
â”‚   â””â”€â”€ ğŸ“ backend/             # åç«¯ Docker é…ç½®
â”‚
â”œâ”€â”€ ğŸ”§ scripts/                  # éƒ¨ç½²å’Œè¿ç»´è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“„ deploy.sh            # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“„ backup.sh            # æ•°æ®å¤‡ä»½è„šæœ¬
â”‚   â””â”€â”€ ğŸ“„ monitor.sh           # ç›‘æ§è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“š docs/                     # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“ api/                 # API æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“ deployment/          # éƒ¨ç½²æ–‡æ¡£
â”‚   â””â”€â”€ ğŸ“ development/         # å¼€å‘æ–‡æ¡£
â”‚
â””â”€â”€ ğŸ§ª tests/                    # é›†æˆæµ‹è¯•
    â”œâ”€â”€ ğŸ“ e2e/                 # ç«¯åˆ°ç«¯æµ‹è¯•
    â””â”€â”€ ğŸ“ performance/         # æ€§èƒ½æµ‹è¯•
```

## ğŸ¯ å„æ¨¡å—è¯¦ç»†è¯´æ˜

### ğŸ¨ å‰ç«¯æ¨¡å— (`frontend/`)

**æŠ€æœ¯æ ˆï¼š** React + TypeScript + Tailwind CSS + Zustand

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- çŸ¥è¯†åº“ç®¡ç†ç•Œé¢
- èŠå¤©å¯¹è¯ç•Œé¢
- æ’ä»¶ç®¡ç†ç•Œé¢
- ç”¨æˆ·æƒé™ç®¡ç†ç•Œé¢

**ç›®å½•è¯´æ˜ï¼š**
- `components/`: å¯å¤ç”¨çš„ UI ç»„ä»¶
- `pages/`: é¡µé¢çº§ç»„ä»¶
- `hooks/`: è‡ªå®šä¹‰ React Hooks
- `stores/`: Zustand çŠ¶æ€ç®¡ç†
- `services/`: API è°ƒç”¨æœåŠ¡
- `utils/`: å·¥å…·å‡½æ•°
- `types/`: TypeScript ç±»å‹å®šä¹‰

### âš™ï¸ åç«¯æ¨¡å— (`backend/`)

**æŠ€æœ¯æ ˆï¼š** FastAPI + SQLAlchemy + Pydantic

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- RESTful API æœåŠ¡
- ç”¨æˆ·è®¤è¯ä¸æƒé™ç®¡ç†
- RAG æ£€ç´¢ä¸é—®ç­”
- æ–‡ä»¶ä¸Šä¼ ä¸å¤„ç†
- æ’ä»¶ç³»ç»Ÿç®¡ç†

**ç›®å½•è¯´æ˜ï¼š**
- `api/`: API è·¯ç”±å®šä¹‰
- `core/`: æ ¸å¿ƒé…ç½®å’Œä¸­é—´ä»¶
- `models/`: æ•°æ®åº“æ¨¡å‹
- `services/`: ä¸šåŠ¡é€»è¾‘æœåŠ¡
- `utils/`: å·¥å…·å‡½æ•°

### ğŸ³ Docker é…ç½® (`docker/`)

**æœåŠ¡ç»„ä»¶ï¼š**
- `frontend`: React å‰ç«¯å®¹å™¨
- `backend`: FastAPI åç«¯å®¹å™¨
- `postgres`: PostgreSQL æ•°æ®åº“
- `qdrant`: Qdrant å‘é‡æ•°æ®åº“
- `redis`: Redis ç¼“å­˜æœåŠ¡
- `nginx`: åå‘ä»£ç†ï¼ˆå¯é€‰ï¼‰

### ğŸ”§ è„šæœ¬å·¥å…· (`scripts/`)

**éƒ¨ç½²è„šæœ¬ï¼š**
- `deploy.sh`: ä¸€é”®éƒ¨ç½²è„šæœ¬
- `backup.sh`: æ•°æ®å¤‡ä»½è„šæœ¬
- `monitor.sh`: ç³»ç»Ÿç›‘æ§è„šæœ¬

### ğŸ“š æ–‡æ¡£ç›®å½• (`docs/`)

**æ–‡æ¡£åˆ†ç±»ï¼š**
- `api/`: API æ¥å£æ–‡æ¡£
- `deployment/`: éƒ¨ç½²æŒ‡å—
- `development/`: å¼€å‘æŒ‡å—

## ğŸš€ å¼€å‘æµç¨‹

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd MetaBox

# é…ç½®ç¯å¢ƒå˜é‡
cp env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶
```

### 2. å¼€å‘æ¨¡å¼
```bash
# å‰ç«¯å¼€å‘
cd frontend
npm install
npm run dev

# åç«¯å¼€å‘
cd backend
pip install -r requirements.txt
uvicorn app.main:app --reload
```

### 3. ç”Ÿäº§éƒ¨ç½²
```bash
# ä¸€é”®éƒ¨ç½²
./scripts/deploy.sh prod

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps
```

## ğŸ“‹ å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
- å‰ç«¯ï¼šESLint + Prettier
- åç«¯ï¼šBlack + isort + flake8
- æäº¤ä¿¡æ¯ï¼šéµå¾ª Conventional Commits

### æµ‹è¯•è¦æ±‚
- å‰ç«¯ï¼šJest + React Testing Library
- åç«¯ï¼šPytest + FastAPI TestClient
- è¦†ç›–ç‡ï¼š> 80%

### æ–‡æ¡£è¦æ±‚
- API æ–‡æ¡£ï¼šè‡ªåŠ¨ç”Ÿæˆ
- ä»£ç æ³¨é‡Šï¼šä¸­æ–‡æ³¨é‡Š
- æäº¤ä¿¡æ¯ï¼šä¸­æ–‡æè¿°

## ğŸ” å¿«é€Ÿå¯¼èˆª

| åŠŸèƒ½ | æ–‡ä»¶è·¯å¾„ | è¯´æ˜ |
|------|----------|------|
| é¡¹ç›®é…ç½® | `.cursorrules` | å¼€å‘è§„èŒƒé…ç½® |
| ç¯å¢ƒå˜é‡ | `env.example` | ç¯å¢ƒå˜é‡æ¨¡æ¿ |
| éƒ¨ç½²é…ç½® | `docker/docker-compose.yml` | Docker ç¼–æ’ |
| éƒ¨ç½²è„šæœ¬ | `scripts/deploy.sh` | ä¸€é”®éƒ¨ç½² |
| å‰ç«¯å…¥å£ | `frontend/src/` | React åº”ç”¨ |
| åç«¯å…¥å£ | `backend/app/` | FastAPI åº”ç”¨ |
| API æ–‡æ¡£ | `docs/api/` | æ¥å£æ–‡æ¡£ |
| éƒ¨ç½²æ–‡æ¡£ | `docs/deployment/` | éƒ¨ç½²æŒ‡å— |

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ·»åŠ æ–°çš„ API æ¥å£ï¼Ÿ
A: åœ¨ `backend/app/api/` ä¸‹åˆ›å»ºæ–°çš„è·¯ç”±æ–‡ä»¶ï¼Œåœ¨ `backend/app/services/` ä¸‹å®ç°ä¸šåŠ¡é€»è¾‘ã€‚

### Q: å¦‚ä½•æ·»åŠ æ–°çš„å‰ç«¯é¡µé¢ï¼Ÿ
A: åœ¨ `frontend/src/pages/` ä¸‹åˆ›å»ºé¡µé¢ç»„ä»¶ï¼Œåœ¨ `frontend/src/components/` ä¸‹åˆ›å»ºå¯å¤ç”¨ç»„ä»¶ã€‚

### Q: å¦‚ä½•ä¿®æ”¹æ•°æ®åº“ç»“æ„ï¼Ÿ
A: ä¿®æ”¹ `backend/app/models/` ä¸‹çš„æ¨¡å‹æ–‡ä»¶ï¼Œä½¿ç”¨ Alembic ç”Ÿæˆè¿ç§»æ–‡ä»¶ã€‚

### Q: å¦‚ä½•æ·»åŠ æ–°çš„æ’ä»¶ï¼Ÿ
A: åœ¨ `backend/app/plugins/` ä¸‹åˆ›å»ºæ’ä»¶æ–‡ä»¶ï¼Œåœ¨å‰ç«¯ `frontend/src/components/` ä¸‹åˆ›å»ºæ’ä»¶ç•Œé¢ã€‚

---

ğŸ“§ å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼šsupport@metabox.com 